<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡†é™¢é¸2026ï¼šå®Œå…¨æ±ºæˆ¦ç‰ˆ</title>
    <style>
        :root { --bg: #020617; --card: #1e293b; --acc: #facc15; --p1: #22c55e; --p2: #3b82f6; }
        body { margin: 0; font-family: sans-serif; background: var(--bg); color: #f8fafc; }
        .screen { display: none; padding: 20px; }
        .screen.active { display: block; }
        
        /* è­°å¸­ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆã“ã“ãŒæ–°æ©Ÿèƒ½ï¼ï¼‰ */
        .meter-wrap { width: 100%; height: 40px; background: #334155; border-radius: 20px; margin: 10px 0; position: relative; overflow: hidden; display: flex; border: 2px solid #fff; }
        .m-bar { height: 100%; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .m-p1 { background: var(--p1); }
        .m-p2 { background: var(--p2); }
        .center-line { position: absolute; left: 50%; top: 0; width: 4px; height: 100%; background: #fff; z-index: 5; }

        /* åœ°å›³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæ•´ç†ã—ã¾ã—ãŸï¼‰ */
        .game-grid { display: grid; grid-template-columns: 1fr 320px; gap: 20px; }
        .map-section { background: #000; padding: 15px; border-radius: 15px; border: 1px solid #334155; }
        .region-block { margin-bottom: 15px; }
        .region-title { color: var(--acc); font-size: 0.8rem; border-bottom: 1px solid #334155; margin-bottom: 8px; }
        .pref-container { display: flex; flex-wrap: wrap; gap: 8px; }
        
        .p-chip { padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; background: #334155; cursor: pointer; border: 1px solid transparent; }
        .p-chip.p1 { background: var(--p1); color: #000; font-weight: bold; }
        .p-chip.p2 { background: var(--p2); color: #fff; font-weight: bold; }

        /* ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .act-btn { width: 100%; padding: 12px; margin: 4px 0; background: #1e293b; color: #fff; border: 1px solid #475569; border-radius: 8px; cursor: pointer; text-align: left; }
        .act-btn:hover { background: #334155; border-color: var(--acc); }
        .turn-box { padding: 15px; border-radius: 10px; text-align: center; font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="setup" class="screen active">
    <div style="max-width:500px; margin:100px auto; background:var(--card); padding:30px; border-radius:20px; text-align:center;">
        <h1 style="color:var(--acc)">è¡†é™¢é¸2026ï¼šæ±ºæˆ¦ãƒ¢ãƒ¼ãƒ‰</h1>
        <input type="text" id="p1" value="ä¸å…š" style="width:80%; padding:10px; margin:10px;">
        <input type="text" id="p2" value="é‡å…š" style="width:80%; padding:10px; margin:10px;">
        <button onclick="start()" style="width:80%; padding:15px; background:var(--p1); border:none; border-radius:10px; font-weight:bold; cursor:pointer;">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
    </div>
</div>

<div id="game" class="screen">
    <div class="meter-wrap">
        <div id="bar1" class="m-bar m-p1" style="width:0%"></div>
        <div id="bar2" class="m-bar m-p2" style="width:0%"></div>
        <div class="center-line"></div>
    </div>

    <div class="game-grid">
        <div class="map-section" id="mapMain"></div>
        <div class="side">
            <div id="turnDisplay" class="turn-box"></div>
            <button class="act-btn" onclick="play('s')">ğŸ¤ è¡—é ­æ¼”èª¬ (ä¸­ç«‹çœŒã‚’1ã¤ç²å¾—)</button>
            <button class="act-btn" onclick="play('v')">ğŸ“± SNSæˆ¦ç•¥ (å¤§éƒ½å¸‚ã‚’1ã¤å¥ªå–)</button>
            <button class="act-btn" onclick="play('h')">ğŸ“º å…¨å›½æ”¾é€ (æ¯”ä¾‹ç¥¨ã‚’ç²å¾—)</button>
            <button class="act-btn" onclick="play('g')">ğŸ  åœ°ç›¤å›ºã‚ (å°é¸æŒ™åŒºã‚’è£œå¼·)</button>
            <button class="act-btn" onclick="play('x')">ğŸ”¥ ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ« (ç›¸æ‰‹ã®çœŒã‚’ä¸­ç«‹ã«)</button>
            <button class="act-btn" onclick="play('z')">ğŸ“¢ æ¯”ä¾‹ä»£è¡¨æ¼”èª¬ (æ¯”ä¾‹ç¥¨UP)</button>
            <div id="log" style="height:100px; overflow-y:auto; background:#000; padding:10px; font-size:0.8rem; color:#4ade80; margin-top:10px;"></div>
            <div id="hireiResult" style="margin-top:10px; font-size:0.9rem;"></div>
        </div>
    </div>
</div>

<script>
const MAP_DATA = {
    "åŒ—æµ·é“ãƒ»æ±åŒ—": ["åŒ—æµ·é“", "é’æ£®", "å²©æ‰‹", "å®®åŸ", "ç§‹ç”°", "å±±å½¢", "ç¦å³¶"],
    "é–¢æ±": ["èŒ¨åŸ", "æ ƒæœ¨", "ç¾¤é¦¬", "åŸ¼ç‰", "åƒè‘‰", "æ±äº¬", "ç¥å¥ˆå·"],
    "ä¸­éƒ¨": ["æ–°æ½Ÿ", "å¯Œå±±", "çŸ³å·", "ç¦äº•", "å±±æ¢¨", "é•·é‡", "å²é˜œ", "é™å²¡", "æ„›çŸ¥"],
    "è¿‘ç•¿": ["ä¸‰é‡", "æ»‹è³€", "äº¬éƒ½", "å¤§é˜ª", "å…µåº«", "å¥ˆè‰¯", "å’Œæ­Œå±±"],
    "ä¸­å›½ãƒ»å››å›½": ["é³¥å–", "å³¶æ ¹", "å²¡å±±", "åºƒå³¶", "å±±å£", "å¾³å³¶", "é¦™å·", "æ„›åª›", "é«˜çŸ¥"],
    "ä¹å·ãƒ»æ²–ç¸„": ["ç¦å²¡", "ä½è³€", "é•·å´", "ç†Šæœ¬", "å¤§åˆ†", "å®®å´", "é¹¿å…å³¶", "æ²–ç¸„"]
};
const SEATS = {"åŒ—æµ·é“":17,"é’æ£®":6,"å²©æ‰‹":6,"å®®åŸ":10,"ç§‹ç”°":5,"å±±å½¢":6,"ç¦å³¶":9,"èŒ¨åŸ":13,"æ ƒæœ¨":10,"ç¾¤é¦¬":10,"åŸ¼ç‰":28,"åƒè‘‰":22,"æ±äº¬":30,"ç¥å¥ˆå·":26,"æ–°æ½Ÿ":10,"å¯Œå±±":6,"çŸ³å·":6,"ç¦äº•":4,"å±±æ¢¨":4,"é•·é‡":10,"å²é˜œ":10,"é™å²¡":16,"æ„›çŸ¥":15,"ä¸‰é‡":8,"æ»‹è³€":4,"äº¬éƒ½":12,"å¤§é˜ª":19,"å…µåº«":12,"å¥ˆè‰¯":6,"å’Œæ­Œå±±":5,"é³¥å–":4,"å³¶æ ¹":4,"å²¡å±±":10,"åºƒå³¶":12,"å±±å£":8,"å¾³å³¶":6,"é¦™å·":6,"æ„›åª›":8,"é«˜çŸ¥":4,"ç¦å²¡":11,"ä½è³€":4,"é•·å´":8,"å¤§åˆ†":6,"å®®å´":6,"é¹¿å…å³¶":9,"æ²–ç¸„":4};
const CITIES = ["æ±äº¬", "å¤§é˜ª", "ç¥å¥ˆå·", "æ„›çŸ¥", "åŸ¼ç‰", "åƒè‘‰", "ç¦å²¡"];

let status = {}, turn = 1, p1N, p2N, h1 = 0, h2 = 0;

function start() {
    p1N = document.getElementById("p1").value;
    p2N = document.getElementById("p2").value;
    document.getElementById("setup").classList.remove("active");
    document.getElementById("game").classList.add("active");
    
    const container = document.getElementById("mapMain");
    for(const [reg, prefs] of Object.entries(MAP_DATA)) {
        const div = document.createElement("div");
        div.className = "region-block";
        div.innerHTML = `<div class="region-title">${reg}</div><div class="pref-container" id="${reg}"></div>`;
        container.appendChild(div);
        prefs.forEach(p => {
            status[p] = 0;
            const span = document.createElement("div");
            span.className = "p-chip"; span.id = "p-"+p;
            span.innerHTML = `${p} <small>${SEATS[p]}</small>`;
            document.getElementById(reg).appendChild(span);
        });
    }
    update();
}

function play(type) {
    const isP1 = turn % 2 !== 0;
    const me = isP1 ? 1 : 2;
    const opp = isP1 ? 2 : 1;
    let logMsg = "";

    if(type === 's') {
        const list = Object.keys(status).filter(p => status[p] === 0);
        if(list.length) { const p = list[0]; status[p] = me; logMsg = `${p}ã‚’ç²å¾—ï¼`; }
    } else if(type === 'v') {
        const list = CITIES.filter(p => status[p] === opp);
        if(list.length) { status[list[0]] = me; logMsg = `éƒ½å¸‚éƒ¨ ${list[0]} ã‚’å¥ªå–ï¼`; }
    } else if(type === 'h') {
        if(me === 1) h1 += 15; else h2 += 15;
        logMsg = `å…¨å›½æ”¾é€ã§æ¯”ä¾‹æ”¯æŒUPï¼`;
    } else if(type === 'x') {
        const list = Object.keys(status).filter(p => status[p] === opp);
        if(list.length) { status[list[0]] = 0; logMsg = `ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«ã§ ${list[0]} ãŒç©ºç™½ã«ï¼`; }
    } else {
        if(me === 1) h1 += 8; else h2 += 8;
        logMsg = `ç€å®Ÿã«æ¯”ä¾‹ç¥¨ã‚’ç©ã¿ä¸Šã’ã€‚`;
    }

    addLog((isP1 ? p1N : p2N) + ": " + logMsg);
    turn++;
    update();
    if(turn > 30) finish();
}

function update() {
    let s1 = 0, s2 = 0;
    Object.keys(status).forEach(p => {
        const el = document.getElementById("p-"+p);
        el.className = "p-chip " + (status[p] === 1 ? "p1" : (status[p] === 2 ? "p2" : ""));
        if(status[p] === 1) s1 += SEATS[p];
        if(status[p] === 2) s2 += SEATS[p];
    });
    
    document.getElementById("bar1").style.width = (s1 / 465 * 100) + "%";
    document.getElementById("bar2").style.width = (s2 / 465 * 100) + "%";
    
    const isP1 = turn % 2 !== 0;
    const tBox = document.getElementById("turnDisplay");
    tBox.textContent = isP1 ? p1N + " ã®ç•ª" : p2N + " ã®ç•ª";
    tBox.style.background = isP1 ? "var(--p1)" : "var(--p2)";
    tBox.style.color = isP1 ? "#000" : "#fff";
    
    document.getElementById("hireiResult").innerHTML = `æ¯”ä¾‹æ”¯æŒ: ${p1N} ${h1}pt / ${p2N} ${h2}pt`;
}

function finish() {
    let s1 = 0, s2 = 0;
    Object.keys(status).forEach(p => { if(status[p]===1) s1+=SEATS[p]; if(status[p]===2) s2+=SEATS[p]; });
    s1 += Math.floor(h1/2); s2 += Math.floor(h2/2);
    alert(`è©¦åˆçµ‚äº†ï¼\n${p1N}: ${s1}è­°å¸­\n${p2N}: ${s2}è­°å¸­\nå‹è€…: ${s1>s2?p1N:p2N}`);
    location.reload();
}

function addLog(m) {
    const l = document.getElementById("log");
    l.innerHTML = `<div>> ${m}</div>` + l.innerHTML;
}
</script>
</body>
</html>
