<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡†é™¢é¸2026ï¼šå®Œå…¨ç‰ˆ</title>
    <style>
        :root { --bg: #020617; --card: #1e293b; --acc: #facc15; --you: #22c55e; --ai: #ef4444; }
        body { margin: 0; font-family: 'Helvetica Neue', Arial, sans-serif; background: var(--bg); color: #f8fafc; overflow: hidden; }
        
        .screen { display: none; height: 100vh; padding: 20px; box-sizing: border-box; }
        .screen.active { display: block; }

        /* ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”»é¢ */
        .setup-card { max-width: 500px; margin: 40px auto; background: var(--card); padding: 30px; border-radius: 20px; text-align: center; border: 2px solid #334155; }
        input[type="text"] { width: 100%; padding: 12px; margin: 15px 0; border-radius: 8px; border: none; background: #0f172a; color: white; font-size: 1rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; text-align: left; }
        .btn-start { width: 100%; padding: 15px; background: var(--you); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .game-wrap { display: flex; gap: 20px; height: 85vh; }
        .map-box { flex: 1; background: #000; position: relative; border-radius: 15px; border: 1px solid #334155; overflow: auto; }
        .map-inner { position: relative; width: 1000px; height: 850px; }
        .side { width: 340px; display: flex; flex-direction: column; gap: 10px; }

        /* éƒ½é“åºœçœŒãƒãƒƒãƒ— */
        .pref { 
            position: absolute; width: 80px; height: 50px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            font-size: 0.75rem; cursor: pointer; transition: 0.2s;
        }
        .neutral { background: #334155; color: #94a3b8; }
        .you { background: var(--you); color: #000; font-weight: bold; box-shadow: 0 0 15px var(--you); z-index: 10; border-color: #fff; }
        .ai { background: var(--ai); color: #fff; font-weight: bold; box-shadow: 0 0 15px var(--ai); z-index: 10; border-color: #fff; }

        /* ãƒ­ã‚°ã¨æƒ…å ± */
        .log { background: #000; border: 1px solid #334155; padding: 10px; height: 150px; overflow-y: auto; font-family: monospace; font-size: 0.8rem; color: #4ade80; }
        .seats { background: var(--card); padding: 15px; border-radius: 10px; font-weight: bold; font-size: 1.1rem; }
        .btn-action { width: 100%; padding: 10px; background: #334155; color: white; border: none; border-radius: 5px; cursor: pointer; text-align: left; margin: 2px 0; }
        .btn-action:hover { background: #475569; }
    </style>
</head>
<body>

<div id="setup" class="screen active">
    <div class="setup-card">
        <h1 style="color:var(--acc)">è¡†é™¢é¸2026ï¼šå‡ºé¦¬æº–å‚™</h1>
        <p>ã‚ãªãŸã®æ”¿å…šå</p>
        <input type="text" id="pName" value="ã‚ãªãŸå…š">
        <p>é‡è¦å…¬ç´„ï¼ˆ5ã¤é¸æŠï¼‰</p>
        <div class="grid" id="policyGrid">
            <label><input type="checkbox" checked> çµŒæ¸ˆå†ç”Ÿ</label>
            <label><input type="checkbox" checked> ç¤¾ä¼šä¿éšœ</label>
            <label><input type="checkbox" checked> æ•™è‚²ç„¡å„ŸåŒ–</label>
            <label><input type="checkbox" checked> é˜²è¡›åŠ›å¼·åŒ–</label>
            <label><input type="checkbox" checked> æ”¿æ²»æ”¹é©</label>
            <label><input type="checkbox"> åœ°æ–¹å‰µç”Ÿ</label>
            <label><input type="checkbox"> æ¸›ç¨</label>
            <label><input type="checkbox"> è„±ç‚­ç´ </label>
        </div>
        <button class="btn-start" onclick="initGame()">é¸æŒ™æˆ¦ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ï¼</button>
    </div>
</div>

<div id="main" class="screen">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <h2 id="dispParty"></h2>
        <div id="dispDay" style="color:var(--acc); font-weight:bold;"></div>
    </div>
    <div class="game-wrap">
        <div class="map-box">
            <div id="map" class="map-inner"></div>
        </div>
        <div class="side">
            <div id="tInd" style="background:var(--acc); color:#000; padding:10px; text-align:center; font-weight:bold; border-radius:8px;">ã‚ãªãŸã®ç•ª</div>
            <div>
                <button class="btn-action" onclick="setMode('sp')">ğŸ¤ è¡—é ­æ¼”èª¬ (çœŒã‚’ç›´æ¥é¸ã¶)</button>
                <button class="btn-action" onclick="autoWin('u')">ğŸ“± SNSæˆ¦ç•¥ (éƒ½å¸‚éƒ¨ã‚’ç²å¾—)</button>
                <button class="btn-action" onclick="autoWin('r')">ğŸ  æˆ¸åˆ¥è¨ªå• (åœ°æ–¹ã‚’ç²å¾—)</button>
                <button class="btn-action" onclick="autoWin('a')">ğŸ“º ãƒ†ãƒ¬ãƒ“å‡ºæ¼” (ãƒ©ãƒ³ãƒ€ãƒ ç²å¾—)</button>
            </div>
            <div id="log" class="log"><div>> å…¬ç¤ºã€‚æ—¥æœ¬åˆ—å³¶ãŒæºã‚Œã¦ã„ã¾ã™ã€‚</div></div>
            <div id="seats" class="seats"></div>
        </div>
    </div>
</div>

<script>
const PREFS = {
    "åŒ—æµ·é“":{x:780,y:20,s:17,t:"r"}, "é’æ£®":{x:780,y:120,s:6,t:"r"}, "å²©æ‰‹":{x:870,y:160,s:6,t:"r"}, "ç§‹ç”°":{x:690,y:160,s:5,t:"r"},
    "å®®åŸ":{x:850,y:240,s:10,t:"r"}, "å±±å½¢":{x:710,y:240,s:6,t:"r"}, "ç¦å³¶":{x:780,y:310,s:9,t:"r"}, "æ–°æ½Ÿ":{x:600,y:210,s:10,t:"r"},
    "èŒ¨åŸ":{x:820,y:420,s:13,t:"r"}, "æ ƒæœ¨":{x:720,y:380,s:10,t:"r"}, "ç¾¤é¦¬":{x:630,y:330,s:10,t:"r"}, "åŸ¼ç‰":{x:630,y:440,s:28,t:"u"},
    "åƒè‘‰":{x:820,y:530,s:22,t:"u"}, "æ±äº¬":{x:710,y:520,s:30,t:"u"}, "ç¥å¥ˆå·":{x:600,y:580,s:26,t:"u"}, "å±±æ¢¨":{x:520,y:420,s:4,t:"r"},
    "é•·é‡":{x:530,y:310,s:10,t:"r"}, "å²é˜œ":{x:430,y:370,s:10,t:"r"}, "é™å²¡":{x:500,y:530,s:16,t:"u"}, "æ„›çŸ¥":{x:420,y:470,s:15,t:"u"},
    "å¯Œå±±":{x:510,y:210,s:6,t:"r"}, "çŸ³å·":{x:420,y:210,s:6,t:"r"}, "ç¦äº•":{x:350,y:270,s:4,t:"r"}, "æ»‹è³€":{x:340,y:350,s:4,t:"r"},
    "ä¸‰é‡":{x:360,y:580,s:8,t:"r"}, "å¥ˆè‰¯":{x:300,y:510,s:6,t:"r"}, "å’Œæ­Œå±±":{x:250,y:630,s:5,t:"r"}, "äº¬éƒ½":{x:280,y:370,s:12,t:"u"},
    "å¤§é˜ª":{x:210,y:460,s:19,t:"u"}, "å…µåº«":{x:190,y:360,s:12,t:"u"}, "é³¥å–":{x:120,y:290,s:4,t:"r"}, "å³¶æ ¹":{x:30,y:290,s:4,t:"r"},
    "å²¡å±±":{x:120,y:370,s:10,t:"r"}, "åºƒå³¶":{x:30,y:370,s:12,t:"r"}, "å±±å£":{x:30,y:470,s:8,t:"r"}, "å¾³å³¶":{x:170,y:580,s:6,t:"r"},
    "é¦™å·":{x:100,y:540,s:6,t:"r"}, "æ„›åª›":{x:30,y:580,s:8,t:"r"}, "é«˜çŸ¥":{x:100,y:640,s:4,t:"r"}, "ç¦å²¡":{x:120,y:150,s:11,t:"u"},
    "ä½è³€":{x:30,y:140,s:4,t:"r"}, "é•·å´":{x:30,y:210,s:8,t:"r"}, "ç†Šæœ¬":{x:120,y:250,s:8,t:"r"}, "å¤§åˆ†":{x:210,y:210,s:6,t:"r"},
    "å®®å´":{x:210,y:120,s:6,t:"r"}, "é¹¿å…å³¶":{x:120,y:50,s:9,t:"r"}, "æ²–ç¸„":{x:30,y:40,s:4,t:"r"}
};

let status = {}, turns = 45, day = 1, isPlayer = true, mode = null, partyName = "";

function initGame() {
    partyName = document.getElementById("pName").value;
    document.getElementById("setup").classList.remove("active");
    document.getElementById("main").classList.add("active");
    document.getElementById("dispParty").textContent = partyName + " é¸æŒ™æœ¬éƒ¨";
    
    const map = document.getElementById("map");
    Object.keys(PREFS).forEach(name => {
        status[name] = "neutral";
        const d = document.createElement("div");
        d.className = "pref neutral";
        d.id = name;
        d.style.left = PREFS[name].x + "px";
        d.style.top = PREFS[name].y + "px";
        d.innerHTML = `<span>${name}</span><br><b>${PREFS[name].s}</b>`;
        d.onclick = () => { if(mode==='sp'){ status[name]='you'; addLog(`${name}ã‚’ç¢ºä¿ï¼`); next(); } };
        map.appendChild(d);
    });
    render();
}

function setMode(m) { if(!isPlayer) return; mode = m; addLog("åœ°å›³ã‹ã‚‰çœŒã‚’é¸ã‚“ã§ãã ã•ã„ã€‚"); }

function autoWin(t) {
    if(!isPlayer) return;
    const pool = Object.keys(status).filter(p => (t==='a' || PREFS[p].t===t) && status[p] !== 'you');
    if(pool.length) {
        const p = pool[Math.floor(Math.random()*pool.length)];
        status[p] = 'you';
        addLog(`${p}ã®æ”¯æŒã‚’ç²å¾—ã—ã¾ã—ãŸã€‚`);
    }
    next();
}

function next() {
    isPlayer = false; mode = null; turns--;
    render();
    document.getElementById("tInd").textContent = "ç›¸æ‰‹ãŒæ´»å‹•ä¸­...";
    document.getElementById("tInd").style.background = "#ef4444";
    document.getElementById("tInd").style.color = "#fff";
    setTimeout(ai, 700);
}

function ai() {
    const pool = Object.keys(status).filter(p => status[p] !== 'ai');
    const p = pool[Math.floor(Math.random()*pool.length)];
    status[p] = 'ai';
    addLog(`ã€è­¦å‘Šã€‘ç›¸æ‰‹å€™è£œãŒ ${p} ã‚’å¥ªã„ã¾ã—ãŸï¼`);
    if(Math.random() < 0.12) {
        const my = Object.keys(status).filter(p => status[p] === 'you');
        if(my.length){
            const bad = my[Math.floor(Math.random()*my.length)];
            status[bad] = 'ai';
            addLog(`ã€é€Ÿå ±ã€‘ä¸ç¥¥äº‹ã§ ${bad} ã®æ”¯æŒã‚’å¤±ã„ã¾ã—ãŸï¼`, true);
        }
    }
    if(turns % 3 === 0) day++;
    isPlayer = true;
    document.getElementById("tInd").textContent = "ã‚ãªãŸã®ç•ª";
    document.getElementById("tInd").style.background = "#facc15";
    document.getElementById("tInd").style.color = "#000";
    render();
}

function render() {
    let y=0, a=0;
    Object.keys(status).forEach(p => {
        document.getElementById(p).className = `pref ${status[p]}`;
        if(status[p]==='you') y += PREFS[p].s;
        if(status[p]==='ai') a += PREFS[p].s;
    });
    document.getElementById("seats").innerHTML = `<span style="color:var(--you)">${partyName}: ${y}</span><br><span style="color:var(--ai)">ç›¸æ‰‹å…šé€£åˆ: ${a}</span>`;
    document.getElementById("dispDay").textContent = `${day}æ—¥ç›® / æ®‹ã‚Š${turns}æ‰‹`;
    if(turns <= 0) {
        alert(`æŠ•é–‹ç¥¨çµ‚äº†ï¼\n${partyName}ã®ç²å¾—è­°å¸­ï¼š${y}\n${y>=233 ? "éåŠæ•°é”æˆï¼æ”¿æ¨©äº¤ä»£æˆåŠŸï¼" : "åŠ›åŠã°ãšã€æ•—åŒ—ã—ã¾ã—ãŸã€‚"}`);
        location.reload();
    }
}

function addLog(m, hot = false) {
    const l = document.getElementById("log");
    const d = document.createElement("div");
    if(hot) d.style.color = "#ff4444";
    d.textContent = "> " + m;
    l.prepend(d);
}
</script>
</body>
</html>
