<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¡†é™¢é¸ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼2026 å®Œå…¨ç‰ˆ</title>
<style>
:root{
  --bg:#020617;--card:#1e293b;--acc:#facc15;
  --p1:#22c55e;--p2:#3b82f6;
}
body{margin:0;font-family:sans-serif;background:var(--bg);color:#f8fafc}
.screen{display:none;padding:20px}
.screen.active{display:block}
.card{background:var(--card);padding:20px;border-radius:15px;margin-bottom:15px}
button{padding:10px;border-radius:8px;border:none;cursor:pointer;font-weight:bold}
button.main{background:var(--acc)}
button.act{width:100%;margin:4px 0;background:#334155;color:#fff}
button.act:hover{background:#475569}

.game{display:grid;grid-template-columns:1fr 320px;gap:15px}
.region{margin-bottom:10px}
.region-title{color:var(--acc);font-size:.8rem;border-bottom:1px solid #334155}
.pref-wrap{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.pref{padding:6px 10px;border-radius:6px;font-size:.75rem;background:#334155;cursor:pointer}
.pref.p1{background:var(--p1);color:#000;font-weight:bold}
.pref.p2{background:var(--p2);font-weight:bold}

.meter{height:30px;background:#334155;border-radius:20px;overflow:hidden;display:flex;border:2px solid #fff}
.m1{background:var(--p1)} .m2{background:var(--p2)}
</style>
</head>
<body>

<!-- ===== ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ===== -->
<div id="setup" class="screen active">
  <div class="card">
    <h2>ãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰</h2>
    <label><input type="radio" name="mode" value="solo" checked> 1äººãƒ—ãƒ¬ã‚¤</label><br>
    <label><input type="radio" name="mode" value="vs"> 2äººãƒ—ãƒ¬ã‚¤</label>
  </div>

  <div class="card">
    <input id="p1name" placeholder="ã‚ãªãŸã®æ”¿å…šå">
    <input id="p2name" placeholder="ç›¸æ‰‹æ”¿å…šåï¼ˆ2äººãƒ—ãƒ¬ã‚¤ç”¨ï¼‰">
  </div>

  <div class="card">
    <h3>å…¬ç´„ã‚’5ã¤é¸æŠ</h3>
    <div id="pledges">
      <label><input type="checkbox" value="çµŒæ¸ˆ"> çµŒæ¸ˆæˆé•·</label><br>
      <label><input type="checkbox" value="æ•™è‚²"> æ•™è‚²</label><br>
      <label><input type="checkbox" value="ç¦ç¥‰"> ç¤¾ä¼šä¿éšœ</label><br>
      <label><input type="checkbox" value="é˜²è¡›"> é˜²è¡›</label><br>
      <label><input type="checkbox" value="ç’°å¢ƒ"> ç’°å¢ƒ</label><br>
      <label><input type="checkbox" value="è¾²æ¥­"> è¾²æ¥­</label><br>
      <label><input type="checkbox" value="æ”¿æ²»"> æ”¿æ²»ã¨ã‚«ãƒ</label>
    </div>
  </div>

  <button class="main" onclick="start()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
</div>

<!-- ===== ã‚²ãƒ¼ãƒ  ===== -->
<div id="game" class="screen">
  <div class="meter">
    <div id="bar1" class="m1"></div>
    <div id="bar2" class="m2"></div>
  </div>

  <div class="game">
    <div id="map"></div>

    <div>
      <div id="turn"></div>
      <button class="act" onclick="setSpeech()">ğŸ¤ è¡—é ­æ¼”èª¬ï¼ˆåœ°åŸŸé¸æŠï¼‰</button>
      <button class="act" onclick="action('sns')">ğŸ“± SNSæˆ¦ç•¥</button>
      <button class="act" onclick="action('tv')">ğŸ“º å…¨å›½æ”¾é€</button>
      <button class="act" onclick="action('scandal')">ğŸ”¥ ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«</button>
      <div id="log" style="font-size:.8rem;margin-top:10px"></div>
    </div>
  </div>
</div>

<script>
const REGIONS={
 "åŒ—æµ·é“ãƒ»æ±åŒ—":["åŒ—æµ·é“","é’æ£®","å²©æ‰‹","å®®åŸ","ç§‹ç”°","å±±å½¢","ç¦å³¶"],
 "é–¢æ±":["èŒ¨åŸ","æ ƒæœ¨","ç¾¤é¦¬","åŸ¼ç‰","åƒè‘‰","æ±äº¬","ç¥å¥ˆå·"],
 "ä¸­éƒ¨":["æ–°æ½Ÿ","å¯Œå±±","çŸ³å·","ç¦äº•","å±±æ¢¨","é•·é‡","å²é˜œ","é™å²¡","æ„›çŸ¥"],
 "è¿‘ç•¿":["ä¸‰é‡","æ»‹è³€","äº¬éƒ½","å¤§é˜ª","å…µåº«","å¥ˆè‰¯","å’Œæ­Œå±±"],
 "ä¸­å›½ãƒ»å››å›½":["é³¥å–","å³¶æ ¹","å²¡å±±","åºƒå³¶","å±±å£","å¾³å³¶","é¦™å·","æ„›åª›","é«˜çŸ¥"],
 "ä¹å·ãƒ»æ²–ç¸„":["ç¦å²¡","ä½è³€","é•·å´","ç†Šæœ¬","å¤§åˆ†","å®®å´","é¹¿å…å³¶","æ²–ç¸„"]
};
const SEATS_TOTAL=465, DIST=289, PR=176;
const status={};
let turn=1,mode="solo",speechMode=false;
let p1,p2,sup1=50,sup2=50;

function start(){
  mode=document.querySelector("input[name=mode]:checked").value;
  const pledges=[...document.querySelectorAll("#pledges input:checked")];
  if(pledges.length!==5){alert("å…¬ç´„ã¯5ã¤é¸æŠ");return;}

  p1=document.getElementById("p1name").value||"ã‚ãªãŸå…š";
  p2=mode==="solo"?"å¯¾ç«‹å…š":(document.getElementById("p2name").value||"ç›¸æ‰‹å…š");

  document.getElementById("setup").classList.remove("active");
  document.getElementById("game").classList.add("active");

  const map=document.getElementById("map");
  for(const [r,prefs] of Object.entries(REGIONS)){
    const d=document.createElement("div");
    d.className="region";
    d.innerHTML=`<div class="region-title">${r}</div><div class="pref-wrap"></div>`;
    prefs.forEach(p=>{
      status[p]=0;
      const s=document.createElement("div");
      s.className="pref"; s.textContent=p;
      s.onclick=()=>prefClick(p);
      d.querySelector(".pref-wrap").appendChild(s);
    });
    map.appendChild(d);
  }
  update();
}

function setSpeech(){
  speechMode=true;
  log("æ¼”èª¬ã™ã‚‹åœ°åŸŸã‚’é¸ã‚“ã§ãã ã•ã„");
}

function prefClick(p){
  if(!speechMode) return;
  status[p]=turn%2?1:2;
  speechMode=false;
  next();
}

function action(type){
  if(type==="sns"){turn%2?sup1+=5:sup2+=5;}
  if(type==="tv"){turn%2?sup1+=10:sup2+=10;}
  if(type==="scandal"){
    const t=Object.keys(status).find(k=>status[k]=== (turn%2?2:1));
    if(t) status[t]=0;
  }
  next();
}

function next(){
  turn++;
  update();
}

function update(){
  let s1=0,s2=0;
  document.querySelectorAll(".pref").forEach(e=>{
    const p=e.textContent;
    e.className="pref "+(status[p]===1?"p1":status[p]===2?"p2":"");
    if(status[p]===1)s1++;
    if(status[p]===2)s2++;
  });

  const pr1=Math.round(PR*(sup1/(sup1+sup2)));
  const pr2=PR-pr1;

  const total1=s1+pr1;
  const total2=s2+pr2;

  document.getElementById("bar1").style.width=(total1/SEATS_TOTAL*100)+"%";
  document.getElementById("bar2").style.width=(total2/SEATS_TOTAL*100)+"%";
  document.getElementById("turn").textContent=(turn%2?p1:p2)+" ã®ç•ª";
}

function log(t){
  document.getElementById("log").innerHTML="<div>"+t+"</div>";
}
</script>
</body>
</html>
