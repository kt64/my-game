<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¡†é™¢é¸2026 å®Œå…¨AIå¯¾æˆ¦ç‰ˆ</title>
<style>
:root{
--bg:#020617;--card:#1e293b;
--p1:#22c55e;--p2:#3b82f6;
}
body{margin:0;font-family:sans-serif;background:var(--bg);color:#fff}
.screen{display:none;padding:20px}
.screen.active{display:block}
.card{background:var(--card);padding:20px;border-radius:12px;margin-bottom:15px}
button{padding:10px;border-radius:8px;border:none;cursor:pointer;font-weight:bold}
button.act{width:100%;margin:4px 0;background:#334155;color:#fff}
button.act:hover{background:#475569}

.meter{
position:relative;
height:40px;
background:#111827;
border-radius:20px;
overflow:hidden;
border:2px solid #fff;
margin-bottom:15px;
display:flex;
}
.bar-left{
background:var(--p1);
height:100%;
text-align:left;
padding-left:10px;
display:flex;
align-items:center;
font-weight:bold;
}
.bar-right{
background:var(--p2);
height:100%;
margin-left:auto;
text-align:right;
padding-right:10px;
display:flex;
align-items:center;
justify-content:flex-end;
font-weight:bold;
}
.center-line{
position:absolute;
left:50%;
top:0;
width:3px;
height:100%;
background:#fff;
}

.game{
display:grid;
grid-template-columns:1fr 320px;
gap:15px;
}
.region{margin-bottom:10px}
.region-title{color:#facc15;font-size:.8rem;border-bottom:1px solid #334155}
.pref-wrap{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.pref{
padding:6px 8px;
border-radius:6px;
font-size:.7rem;
background:#334155;
cursor:pointer
}
.pref.p1{background:var(--p1);color:#000;font-weight:bold}
.pref.p2{background:var(--p2);font-weight:bold}
</style>
</head>
<body>

<div id="setup" class="screen active">
<div class="card">
<h2>ãƒ¢ãƒ¼ãƒ‰é¸æŠ</h2>
<label><input type="radio" name="mode" value="solo" checked> 1äººãƒ—ãƒ¬ã‚¤ï¼ˆvs AIï¼‰</label><br>
<label><input type="radio" name="mode" value="vs"> 2äººãƒ—ãƒ¬ã‚¤</label>
</div>

<div class="card">
<input id="p1name" placeholder="ã‚ãªãŸã®æ”¿å…šå">
<input id="p2name" placeholder="ç›¸æ‰‹æ”¿å…šåï¼ˆ2äººç”¨ï¼‰">
</div>

<button onclick="start()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
</div>

<div id="game" class="screen">

<div class="meter">
<div id="bar1" class="bar-left"></div>
<div id="bar2" class="bar-right"></div>
<div class="center-line"></div>
</div>

<div id="phase" style="margin-bottom:10px;font-weight:bold"></div>

<div class="game">
<div id="map"></div>

<div>
<button class="act" onclick="setSpeech()">ğŸ¤ è¡—é ­æ¼”èª¬ï¼ˆåœ°åŸŸé¸æŠï¼‰</button>
<button class="act" onclick="action('sns')">ğŸ“± SNS</button>
<button class="act" onclick="action('tv')">ğŸ“º å…¨å›½æ”¾é€</button>
<button class="act" onclick="action('scandal')">ğŸ”¥ ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«</button>
<div id="log" style="margin-top:10px;font-size:.8rem"></div>
</div>
</div>
</div>

<script>
const REGIONS={
"åŒ—æµ·é“ãƒ»æ±åŒ—":["åŒ—æµ·é“","é’æ£®","å²©æ‰‹","å®®åŸ","ç§‹ç”°","å±±å½¢","ç¦å³¶"],
"é–¢æ±":["èŒ¨åŸ","æ ƒæœ¨","ç¾¤é¦¬","åŸ¼ç‰","åƒè‘‰","æ±äº¬","ç¥å¥ˆå·"],
"ä¸­éƒ¨":["æ–°æ½Ÿ","å¯Œå±±","çŸ³å·","ç¦äº•","å±±æ¢¨","é•·é‡","å²é˜œ","é™å²¡","æ„›çŸ¥"],
"è¿‘ç•¿":["ä¸‰é‡","æ»‹è³€","äº¬éƒ½","å¤§é˜ª","å…µåº«","å¥ˆè‰¯","å’Œæ­Œå±±"],
"ä¸­å›½ãƒ»å››å›½":["é³¥å–","å³¶æ ¹","å²¡å±±","åºƒå³¶","å±±å£","å¾³å³¶","é¦™å·","æ„›åª›","é«˜çŸ¥"],
"ä¹å·ãƒ»æ²–ç¸„":["ç¦å²¡","ä½è³€","é•·å´","ç†Šæœ¬","å¤§åˆ†","å®®å´","é¹¿å…å³¶","æ²–ç¸„"]
};

const TOTAL=465, PR=176;
let status={},mode="solo";
let turn=1;
let sup1=50,sup2=50;
let p1,p2;
let speechMode=false;

function start(){
mode=document.querySelector("input[name=mode]:checked").value;
p1=document.getElementById("p1name").value||"ã‚ãªãŸå…š";
p2=mode==="solo"?"AIå…š":(document.getElementById("p2name").value||"ç›¸æ‰‹å…š");

document.getElementById("setup").classList.remove("active");
document.getElementById("game").classList.add("active");

const map=document.getElementById("map");
for(const [r,prefs] of Object.entries(REGIONS)){
const d=document.createElement("div");
d.className="region";
d.innerHTML=`<div class="region-title">${r}</div><div class="pref-wrap"></div>`;
prefs.forEach(p=>{
status[p]=0;
const s=document.createElement("div");
s.className="pref";
s.textContent=p;
s.onclick=()=>prefClick(p);
d.querySelector(".pref-wrap").appendChild(s);
});
map.appendChild(d);
}
update();
}

function setSpeech(){
speechMode=true;
log("æ¼”èª¬ã™ã‚‹çœŒã‚’é¸æŠã—ã¦ãã ã•ã„");
}

function prefClick(p){
if(!speechMode) return;
status[p]=1;
speechMode=false;
nextTurn();
}

function action(type){
if(type==="sns") sup1+=5;
if(type==="tv") sup1+=8;
if(type==="scandal"){
const t=Object.keys(status).find(k=>status[k]===2);
if(t) status[t]=0;
}
nextTurn();
}

function aiAction(){
const actions=["sns","tv","scandal","speech"];
const pick=actions[Math.floor(Math.random()*actions.length)];

if(pick==="speech"){
const free=Object.keys(status).filter(k=>status[k]===0);
if(free.length){
status[free[Math.floor(Math.random()*free.length)]]=2;
}
}
if(pick==="sns") sup2+=5;
if(pick==="tv") sup2+=8;
if(pick==="scandal"){
const t=Object.keys(status).find(k=>status[k]===1);
if(t) status[t]=0;
}
}

function nextTurn(){
if(mode==="solo"){
aiAction();
}
turn++;
update();
if(turn>45) finish();
}

function update(){
let s1=0,s2=0;
document.querySelectorAll(".pref").forEach(e=>{
const p=e.textContent;
e.className="pref "+(status[p]===1?"p1":status[p]===2?"p2":"");
if(status[p]===1)s1++;
if(status[p]===2)s2++;
});

const pr1=Math.round(PR*(sup1/(sup1+sup2)));
const pr2=PR-pr1;

const total1=s1+pr1;
const total2=s2+pr2;

document.getElementById("bar1").style.width=(total1/TOTAL*100)+"%";
document.getElementById("bar2").style.width=(total2/TOTAL*100)+"%";
document.getElementById("bar1").textContent=p1+" "+total1+"è­°å¸­";
document.getElementById("bar2").textContent=total2+"è­°å¸­ "+p2;

const day=Math.ceil(turn/3);
const phase=["æœ","æ˜¼","å¤œ"][(turn-1)%3];
document.getElementById("phase").textContent=
day+"æ—¥ç›®ã€"+phase+"ã€‘ "+p1+"ã®è¡Œå‹•";
}

function finish(){
alert("é¸æŒ™çµ‚äº†ï¼");
location.reload();
}

function log(t){
document.getElementById("log").innerHTML="<div>"+t+"</div>";
}
</script>
</body>
</html>
