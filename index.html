<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡†é™¢é¸2026ï¼šæ—¥æœ¬åˆ¶è¦‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        :root { --bg: #020617; --card: #1e293b; --acc: #facc15; --you: #22c55e; --ai: #ef4444; }
        body { margin: 0; font-family: "Hiragino Sans", sans-serif; background: var(--bg); color: #f8fafc; overflow-x: hidden; }
        .screen { display: none; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .screen.active { display: block; }
        .setup-box { max-width: 500px; margin: 40px auto; background: var(--card); padding: 30px; border-radius: 20px; border: 2px solid #334155; text-align: center; }
        input[type="text"] { width: 90%; padding: 12px; margin: 15px 0; border-radius: 8px; border: none; background: #0f172a; color: white; font-size: 1rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; text-align: left; }
        .btn-start { width: 100%; padding: 15px; background: var(--you); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }
        .game-layout { display: flex; gap: 20px; flex-wrap: wrap; height: 85vh; }
        .map-box { flex: 1; min-width: 600px; background: #000; position: relative; border-radius: 15px; border: 1px solid #334155; overflow: auto; }
        .map-inner { position: relative; width: 1000px; height: 850px; }
        .pref { position: absolute; width: 75px; height: 45px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.7rem; cursor: pointer; transition: 0.2s; }
        .neutral { background: #334155; color: #94a3b8; }
        .you { background: var(--you); color: #000; font-weight: bold; box-shadow: 0 0 10px var(--you); z-index: 5; }
        .ai { background: var(--ai); color: #fff; font-weight: bold; box-shadow: 0 0 10px var(--ai); z-index: 5; }
        .side { width: 320px; display: flex; flex-direction: column; gap: 10px; }
        .log { background: #000; border: 1px solid #334155; padding: 10px; height: 150px; overflow-y: auto; font-family: monospace; font-size: 0.8rem; color: #4ade80; }
        .seats { background: var(--card); padding: 15px; border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div id="setup" class="screen active">
    <div class="setup-box">
        <h1 style="color:var(--acc)">è¡†é™¢é¸2026ï¼šå‡ºé¦¬ç™»éŒ²</h1>
        <p>æ”¿å…šåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
        <input type="text" id="pName" value="ã‚ãªãŸå…š">
        <p>é‡è¦å…¬ç´„ï¼ˆ5ã¤é¸æŠï¼‰</p>
        <div class="grid">
            <label><input type="checkbox" checked> çµŒæ¸ˆå†ç”Ÿ</label>
            <label><input type="checkbox" checked> ç¤¾ä¼šä¿éšœ</label>
            <label><input type="checkbox" checked> æ•™è‚²ç„¡å„ŸåŒ–</label>
            <label><input type="checkbox" checked> é˜²è¡›å¼·åŒ–</label>
            <label><input type="checkbox" checked> æ”¿æ²»æ”¹é©</label>
            <label><input type="checkbox"> åœ°æ–¹å‰µç”Ÿ</label>
            <label><input type="checkbox"> æ¶ˆè²»ç¨æ¸›ç¨</label>
            <label><input type="checkbox"> è„±ç‚­ç´ </label>
        </div>
        <button class="btn-start" onclick="initGame()">é¸æŒ™æˆ¦ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
    </div>
</div>

<div id="game" class="screen">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <h2 id="dispName"></h2>
        <div id="dispDay" style="color:var(--acc); font-weight:bold;"></div>
    </div>
    <div class="game-layout">
        <div class="map-box"><div id="map" class="map-inner"></div></div>
        <div class="side">
            <div id="tInd" style="background:var(--acc); color:#000; padding:10px; text-align:center; font-weight:bold; border-radius:8px;">ã‚ãªãŸã®ç•ª</div>
            <button onclick="setMode('sp')" style="width:100%; padding:10px; margin:2px 0; cursor:pointer;">ğŸ¤ è¡—é ­æ¼”èª¬ (çœŒã‚’ç›´æ¥é¸ã¶)</button>
            <button onclick="auto('u')" style="width:100%; padding:10px; margin:2px 0; cursor:pointer;">ğŸ“± SNSæˆ¦ç•¥ (éƒ½å¸‚éƒ¨ã‚’ç²å¾—)</button>
            <button onclick="auto('r')" style="width:100%; padding:10px; margin:2px 0; cursor:pointer;">ğŸ  æˆ¸åˆ¥è¨ªå• (åœ°æ–¹ã‚’ç²å¾—)</button>
            <div id="log" class="log"><div>> é¸æŒ™æˆ¦ãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚</div></div>
            <div id="seats" class="seats"></div>
        </div>
    </div>
</div>

<script>
const DATA = {
    "åŒ—æµ·é“":{x:750,y:20,s:17,t:"r"}, "é’æ£®":{x:750,y:120,s:6,t:"r"}, "å²©æ‰‹":{x:840,y:160,s:6,t:"r"}, "ç§‹ç”°":{x:660,y:160,s:5,t:"r"},
    "å®®åŸ":{x:820,y:240,s:10,t:"r"}, "å±±å½¢":{x:680,y:240,s:6,t:"r"}, "ç¦å³¶":{x:750,y:310,s:9,t:"r"}, "æ–°æ½Ÿ":{x:570,y:210,s:10,t:"r"},
    "èŒ¨åŸ":{x:780,y:420,s:13,t:"r"}, "æ ƒæœ¨":{x:680,y:380,s:10,t:"r"}, "ç¾¤é¦¬":{x:590,y:330,s:10,t:"r"}, "åŸ¼ç‰":{x:590,y:440,s:28,t:"u"},
    "åƒè‘‰":{x:790,y:530,s:22,t:"u"}, "æ±äº¬":{x:680,y:520,s:30,t:"u"}, "ç¥å¥ˆå·":{x:570,y:570,s:26,t:"u"}, "å±±æ¢¨":{x:490,y:420,s:4,t:"r"},
    "é•·é‡":{x:500,y:310,s:10,t:"r"}, "å²é˜œ":{x:400,y:370,s:10,t:"r"}, "é™å²¡":{x:470,y:530,s:16,t:"u"}, "æ„›çŸ¥":{x:390,y:470,s:15,t:"u"},
    "å¯Œå±±":{x:480,y:210,s:6,t:"r"}, "çŸ³å·":{x:390,y:210,s:6,t:"r"}, "ç¦äº•":{x:320,y:270,s:4,t:"r"}, "æ»‹è³€":{x:310,y:350,s:4,t:"r"},
    "ä¸‰é‡":{x:330,y:580,s:8,t:"r"}, "å¥ˆè‰¯":{x:270,y:510,s:6,t:"r"}, "å’Œæ­Œå±±":{x:220,y:630,s:5,t:"r"}, "äº¬éƒ½":{x:250,y:370,s:12,t:"u"},
    "å¤§é˜ª":{x:180,y:460,s:19,t:"u"}, "å…µåº«":{x:160,y:360,s:12,t:"u"}, "é³¥å–":{x:100,y:290,s:4,t:"r"}, "å³¶æ ¹":{x:10,y:290,s:4,t:"r"},
    "å²¡å±±":{x:100,y:370,s:10,t:"r"}, "åºƒå³¶":{x:10,y:370,s:12,t:"r"}, "å±±å£":{x:10,y:470,s:8,t:"r"}, "é¦™å·":{x:80,y:540,s:6,t:"r"},
    "å¾³å³¶":{x:150,y:580,s:6,t:"r"}, "æ„›åª›":{x:10,y:580,s:8,t:"r"}, "é«˜çŸ¥":{x:80,y:640,s:4,t:"r"}, "ç¦å²¡":{x:100,y:150,s:11,t:"u"},
    "ä½è³€":{x:10,y:140,s:4,t:"r"}, "é•·å´":{x:10,y:210,s:8,t:"r"}, "ç†Šæœ¬":{x:100,y:250,s:8,t:"r"}, "å¤§åˆ†":{x:190,y:210,s:6,t:"r"},
    "å®®å´":{x:190,y:120,s:6,t:"r"}, "é¹¿å…å³¶":{x:100,y:50,s:9,t:"r"}, "æ²–ç¸„":{x:10,y:40,s:4,t:"r"}
};

let status = {}, turns = 45, day = 1, isPlayer = true, mode = null;

function initGame() {
    document.getElementById("setup").classList.remove("active");
    document.getElementById("game").classList.add("active");
    document.getElementById("dispName").textContent = document.getElementById("pName").value + " æœ¬éƒ¨";
    const map = document.getElementById("map");
    Object.keys(DATA).forEach(name => {
        status[name] = "neutral";
        const d = document.createElement("div");
        d.className = "pref neutral"; d.id = name;
        d.style.left = DATA[name].x + "px"; d.style.top = DATA[name].y + "px";
        d.innerHTML = `<span>${name}</span><b>${DATA[name].s}</b>`;
        d.onclick = () => { if(mode==='sp'){ status[name]='you'; addLog(`${name}ã§æ¼”èª¬ã€‚`); next(); } };
        map.appendChild(d);
    });
    render();
}

function setMode(m) { if(!isPlayer) return; mode = m; addLog("åœ°å›³ã‹ã‚‰çœŒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"); }
function auto(t) {
    if(!isPlayer) return;
    const pool = Object.keys(status).filter(p => DATA[p].t === t && status[p] !== 'you');
    if(pool.length) { const p = pool[Math.floor(Math.random()*pool.length)]; status[p] = 'you'; addLog(`${p}ã®æ”¯æŒã‚’æ‹¡å¤§ã€‚`); }
    next();
}

function next() {
    isPlayer = false; mode = null; turns--; render();
    document.getElementById("tInd").textContent = "ç›¸æ‰‹ãŒæ´»å‹•ä¸­...";
    document.getElementById("tInd").style.background = "#ef4444";
    setTimeout(ai, 600);
}

function ai() {
    const targets = Object.keys(status).filter(p => status[p] !== 'ai');
    const p = targets[Math.floor(Math.random()*targets.length)];
    status[p] = 'ai'; addLog(`ã€è­¦å‘Šã€‘ç›¸æ‰‹ãŒ ${p} ã‚’å¥ªå–ï¼`);
    if(Math.random() < 0.1) {
        const my = Object.keys(status).filter(p => status[p] === 'you');
        if(my.length){ const bad = my[Math.floor(Math.random()*my.length)]; status[bad] = 'ai'; addLog(`ã€ä¸ç¥¥äº‹ã€‘${bad} ã®æ”¯æŒãŒä½ä¸‹ï¼`, true); }
    }
    if(turns % 3 === 0) day++;
    isPlayer = true;
    document.getElementById("tInd").textContent = "ã‚ãªãŸã®ç•ª";
    document.getElementById("tInd").style.background = "#facc15";
    render();
}

function render() {
    let y=0, a=0;
    Object.keys(status).forEach(p => {
        document.getElementById(p).className = `pref ${status[p]}`;
        if(status[p]==='you') y += DATA[p].s;
        if(status[p]==='ai') a += DATA[p].s;
    });
    document.getElementById("seats").innerHTML = `ç²å¾—è­°å¸­<br>ã‚ãªãŸ: ${y}<br>ç›¸æ‰‹å…š: ${a}`;
    document.getElementById("dispDay").textContent = `${day}æ—¥ç›® / æ®‹ã‚Š${turns}å›`;
    if(turns <= 0) { alert(`çµ‚äº†ï¼ç²å¾—è­°å¸­ï¼š${y}`); location.reload(); }
}

function addLog(m, hot = false) {
    const l = document.getElementById("log");
    const d = document.createElement("div");
    if(hot) d.style.color = "#ff4444";
    d.textContent = "> " + m;
    l.prepend(d);
}
</script>
</body>
</html>
